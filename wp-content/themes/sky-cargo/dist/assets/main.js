document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".lead-form");t&&t.addEventListener("submit",async o=>{o.preventDefault();const e=t.querySelector(".js-form-message"),r=t.querySelector('button[type="submit"]');e.className="lead-form__message js-form-message",e.textContent="Отправка...",r.disabled=!0;const n=new FormData(t);try{const s=await(await fetch(t.getAttribute("action"),{method:"POST",body:n})).json();s.success?(e.classList.add("lead-form__message--success"),e.textContent=s.data,t.reset()):(e.classList.add("lead-form__message--error"),e.textContent=s.data)}catch(a){e.classList.add("lead-form__message--error"),e.textContent="Произошла ошибка при отправке. Попробуйте позже.",console.error("Form Submit Error:",a)}finally{r.disabled=!1}})});
